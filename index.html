<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Anniversary</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        /* RESET & BASE STYLES */
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            font-family: 'Quicksand', sans-serif;
        }

        body {
            background: 
                radial-gradient(circle at 20% 30%, #4b008233, transparent 40%),
                radial-gradient(circle at 80% 70%, #ff1c8d22, transparent 40%),
                linear-gradient(160deg, #0f0518 0%, #1a0a2e 50%, #050505 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
            background-attachment: fixed;
        }

        body.no-scroll {
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: fixed;
            touch-action: none;
        }

        h1, h2 {
            font-family: 'Dancing Script', cursive;
            background: linear-gradient(to bottom right, #ffffff, #ffb2d9, #ff4fa3);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 8px rgba(255, 79, 163, 0.3));
        }

        /* TOPIC CARD STYLES */
        .topic {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 35px 25px;
            border-radius: 40px;
            margin-bottom: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .topic.show { opacity: 1; transform: translateY(0); }
        .topic h2 { display: inline-block; animation: floatingText 3s ease-in-out infinite; font-size: 3rem; margin-bottom: 15px; }

        @keyframes floatingText {
            0%, 100% { transform: translateY(0) scale(1); filter: drop-shadow(0 0 5px #ff4fa3); }
            50% { transform: translateY(-5px) scale(1.05); filter: drop-shadow(0 0 15px #ff4fa3); }
        }

        /* LOCK SCREEN */
        .lock {
            position: fixed; inset: 0;
            background: radial-gradient(circle, #2b0f3a, #000);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 9999; text-align: center; padding: 20px;
        }
        .lock input {
            padding: 12px 20px; border-radius: 30px; border: 1px solid #ff4fa3;
            background: rgba(255,255,255,0.1); color: white; text-align: center; outline: none; margin-top: 20px;
        }
        .lock button {
            margin-top: 15px; padding: 12px 40px; border: none; border-radius: 30px;
            background: linear-gradient(45deg, #ff4fa3, #ff1c8d);
            color: white; font-weight: bold; box-shadow: 0 4px 15px rgba(255, 79, 163, 0.4);
        }
        #error { color: #ff8080; display: none; margin-top: 10px; }

        /* HERO & TIMER */
        .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .hero h1 { font-size: 4.5rem; line-height: 1; }
        .timer { display: flex; gap: 12px; justify-content: center; margin-top: 40px; flex-wrap: wrap; }
        .time-box {
            background: rgba(255, 79, 163, 0.1); backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 79, 163, 0.3); padding: 15px; border-radius: 25px;
            min-width: 120px; text-align: center;
        }
        .time-box h2 { font-size: 2rem; -webkit-text-fill-color: white; }
        .time-box p { font-size: 0.8rem; color: #ff80ab; text-transform: uppercase; font-weight: 600; }

        /* GAME STYLES */
        #game-container { margin-top: 20px; background: rgba(0, 0, 0, 0.3); border-radius: 20px; padding: 15px; overflow: hidden; }
        #game-area { width: 100%; height: 300px; position: relative; cursor: crosshair; display: none; }
        #heart-target { position: absolute; font-size: 40px; user-select: none; transition: all 0.2s ease; cursor: pointer; }
        #score { font-size: 1.5rem; color: #ff4fa3; margin-bottom: 10px; }
        #start-game { padding: 10px 25px; background: #ff4fa3; border: none; color: white; border-radius: 30px; cursor: pointer; }

        /* ENVELOPE STYLES */
        #envelope-wrapper { display: flex; justify-content: center; align-items: center; height: 300px; perspective: 1000px; margin: 20px 0; }
        .envelope { position: relative; width: 260px; height: 170px; background: #ff4fa3; border-radius: 0 0 10px 10px; cursor: pointer; }
        .flap {
            position: absolute; top: 0; width: 0; height: 0;
            border-left: 130px solid transparent; border-right: 130px solid transparent;
            border-bottom: 90px solid #ff1c8d; transform-origin: top; transition: 0.6s; z-index: 4;
        }
        .letter {
            position: absolute; bottom: 5px; left: 10px; width: 240px; height: 150px;
            background: #ffffff; z-index: 2; transition: 0.6s; padding: 20px; border-radius: 5px;
            display: flex; align-items: center; justify-content: center;
        }
        .letter p { color: #40164e !important; font-family: 'Dancing Script', cursive; font-size: 1.1rem; text-align: center; }
        .envelope.open .flap { transform: rotateX(180deg); z-index: 1; }
        .envelope.open .letter { transform: translateY(-100px); z-index: 5; }
        #next-letter-btn { margin: 10px auto; padding: 10px 20px; background: #ff1c8d; border: none; border-radius: 20px; color: white; display: none; }

        /* SONGS & DRAMA CARDS */
        .songs-container, .drama-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        .song-card, .drama-card { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 10px; border: 1px solid rgba(255, 79, 163, 0.1); }
        .song-card img, .drama-poster img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 10px; }
        .drama-poster { position: relative; }
        .rating { position: absolute; top: 5px; right: 5px; background: rgba(0,0,0,0.7); color: #ffb74d; font-size: 0.6rem; padding: 2px 5px; border-radius: 5px; }
        .song-card strong, .drama-card strong { font-size: 0.75rem; display: block; margin-top: 5px; color: #ff4fa3; }
        .song-card small { font-size: 0.6rem; color: #ccc; }
        .song-card button { width: 100%; margin-top: 10px; background: rgba(255,255,255,0.1); border: none; color: white; border-radius: 20px; cursor: pointer; padding: 5px; }

        /* SWIPER */
        .swiper { width: 100%; padding: 20px 0 50px; }
        .swiper-slide { width: 280px !important; height: 400px; border-radius: 20px; overflow: hidden; border: 2px solid #ff4fa344; }
        .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }

        /* DECORATIONS */
        #stars-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: twinkle var(--duration) infinite ease-in-out; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }
        .love { position: fixed; font-size: 22px; pointer-events: none; animation: boom 1s forwards; z-index: 10000; }
        @keyframes boom { to { transform: translateY(-100px) scale(2.5); opacity: 0; } }
        
        .place { color: #ff80ab; font-style: italic; margin-bottom: 20px; font-size: 0.9rem; }
        section { padding: 20px 5%; }
    </style>
</head>

<body class="no-scroll">
    <div id="stars-container"></div>

    <div class="lock" id="lock">
        <h1>üîí Tebak Kuncinya Cinta</h1>
        <input type="password" id="password" placeholder="Password">
        <button onclick="unlock()">Buka</button>
        <small id="error">Password salah üíî</small>
    </div>

    <div class="topic hero">
        <h2>Happy Anniversary</h2>
        <p>Hari dimana kamu datang dan mengubah segalanya üíï</p>
        <div class="timer">
            <div class="time-box">
                <h2 id="daysTogether">0</h2>
                <p>Hari Bersama</p>
            </div>
            <div class="time-box">
                <h2 id="countdown">0</h2>
                <p>Menuju Anniversary</p>
            </div>
        </div>
    </div>

    <section>
        <div class="topic">
            <h2>üéÆ Catch My Love Game</h2>
            <p>Tangkap hatiku sebanyak mungkin! ‚ù§Ô∏è</p>
            <div id="game-container">
                <div id="score">Skor: 0</div>
                <div id="game-area">
                    <div id="heart-target">üíñ</div>
                </div>
                <button id="start-game" onclick="startGame()">Mulai Game</button>
            </div>
        </div>
    </section>

    <section>
        <div class="topic">
            <h2>üíå Surat Buat Kamu</h2>
            <p>Klik suratnya untuk melihat pesan rahasia...</p>
            <div id="envelope-wrapper">
                <div class="envelope" id="envelope" onclick="openLetter()">
                    <div class="flap"></div>
                    <div class="letter">
                        <p id="love-text">Klik Aku!</p>
                    </div>
                </div>
            </div>
            <button id="next-letter-btn" onclick="nextMessage()">Pesan Lain ‚ú®</button>
        </div>
    </section>

    <section>
        <div class="topic distance-card">
            <h2>üìç Jarak Kita</h2>
            <div id="map" style="width: 100%; height: 250px; border-radius: 20px; margin: 15px 0; border: 1px solid #ff4fa3;"></div>
            <div onclick="openJagat()" style="cursor:pointer">
                <p style="font-size:2rem; font-weight: bold; color: #ff4fa3;">
                    <span id="distance">0</span> KM
                </p>
                <small>Selangkah lebih dekat ke hatimu ‚ù§Ô∏è (Tap untuk Jagat)</small>
            </div>
        </div>
    </section>

    <section>
        <div class="topic">
            <h2>üé∂ Ur Favorit Song</h2>
            <div class="songs-container">
                <div class="song-card">
                    <img src="cover1.jpg" alt="Song"><strong>Here Your Perfect</strong><small>Jamie Miller</small>
                    <button onclick="playSong(0, this)">‚ñ∂</button>
                </div>
                <div class="song-card">
                    <img src="this is how you fall in love.jpg" alt="Song"><strong>this is how you fall in love</strong><small>Jeremy Zucker</small>
                    <button onclick="playSong(1, this)">‚ñ∂</button>
                </div>
                <div class="song-card">
                    <img src="ILYSB.jpg" alt="Song"><strong>ILYSB</strong><small>LANY</small>
                    <button onclick="playSong(2, this)">‚ñ∂</button>
                </div>
            </div>
        </div>

        <div class="topic">
            <h2>üíñ Our Photos</h2>
            <div class="place">üìç DIMANA PUN ASAL AMA KAMU MAH AKU MAUU SAYANGüíû</div>
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="fd1.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd2.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd3.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd4.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd5.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd6.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd7.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd8.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd9.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="fd10.jpg" alt="Photo"></div>
                </div>
            </div>
        </div>

        <div class="topic">
            <h2>üíû Ur Photo</h2>
            <div class="place">üìç Makasih ya sudah jadi salah satu alasan kenapa hari-hariku terasa lebih ringan</div>
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="jd1.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd2.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd3.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd4.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd5.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd6.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd7.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd8.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd9.jpg" alt="Photo"></div>
                    <div class="swiper-slide"><img src="jd10.jpg" alt="Photo"></div>
                </div>
            </div>
        </div>

        <div class="topic">
            <h2>üé¨ Drakor Favorit Kita</h2>
            <div class="drama-container">
                <div class="drama-card">
                    <div class="drama-poster"><img src="drakor1.jpg" alt="Drama"><div class="rating">‚≠ê 9.8</div></div>
                    <strong>Taxi Driver</strong>
                    <p style="font-size: 0.6rem; color: #ccc;">Orang baik ingin balas dendam ‚ú®</p>
                </div>
                <div class="drama-card">
                    <div class="drama-poster"><img src="drakor2.jpg" alt="Drama"><div class="rating">‚≠ê 9.5</div></div>
                    <strong>Cafe Minamdang</strong>
                    <p style="font-size: 0.6rem; color: #ccc;">Action lucu dan romantis ‚ù§Ô∏è</p>
                </div>
                <div class="drama-card">
                    <div class="drama-poster"><img src="drakor3.jpg" alt="Drama"><div class="rating">‚≠ê 9.2</div></div>
                    <strong>The Trauma Code</strong>
                    <p style="font-size: 0.6rem; color: #ccc;">Perjuangan medis bertaruh waktu üåä</p>
                </div>
                <div class="drama-card">
                    <div class="drama-poster"><img src="drakor4.jpg" alt="Drama"><div class="rating">‚≠ê 9.2</div></div>
                    <strong>Twinkling Watermelon</strong>
                    <p style="font-size: 0.6rem; color: #ccc;">Kisah seorang anak yang pergi ke masalalu ayahnya </p>
                </div>
            </div>
        </div>
    </section>

    <audio id="music"></audio>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        /* UNLOCK FUNCTION */
        const correctPassword = "1";
        function unlock() {
            const pass = document.getElementById("password").value;
            if (pass === correctPassword) {
                document.getElementById("lock").style.display = "none";
                document.body.classList.remove("no-scroll");
                document.body.style.touchAction = "auto";
            } else {
                document.getElementById("error").style.display = "block";
            }
        }

        /* STAR BACKGROUND */
        const starsContainer = document.getElementById('stars-container');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3 + 'px';
            star.style.width = size; star.style.height = size;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            starsContainer.appendChild(star);
        }

        /* TIMER */
        const start = new Date("2024-01-15");
        function updateTimer() {
            const now = new Date();
            document.getElementById("daysTogether").innerText = Math.floor((now - start) / 86400000);
            let nextA = new Date(now.getFullYear(), start.getMonth(), start.getDate());
            if (nextA < now) nextA.setFullYear(now.getFullYear() + 1);
            document.getElementById("countdown").innerText = Math.ceil((nextA - now) / 86400000);
        }
        setInterval(updateTimer, 1000); updateTimer();

        /* MAP LOGIC */
        const rumahSaya = [1.178267, 104.080038]; 
        const rumahDia = [1.046056, 103.955594];
        const map = L.map('map', {zoomControl: false, attributionControl: false}).setView(rumahSaya, 11);
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}').addTo(map);
        const pinkIcon = L.divIcon({className: 'pulse-icon', html: "<div style='background-color:#ff4fa3; width:12px; height:12px; border-radius:50%; border:2px solid white;'></div>"});
        L.marker(rumahSaya, {icon: pinkIcon}).addTo(map);
        L.marker(rumahDia, {icon: pinkIcon}).addTo(map);
        const rute = L.polyline([rumahSaya, rumahDia], {color: '#ff4fa3', weight: 2, dashArray: '5, 5'}).addTo(map);
        map.fitBounds(rute.getBounds(), {padding: [30, 30]});

        function hitungJarak(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
            return (R * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)))).toFixed(1);
        }
        document.getElementById("distance").innerText = hitungJarak(rumahSaya[0], rumahSaya[1], rumahDia[0], rumahDia[1]);

        /* GAME LOGIC */
        let score = 0;
        const heart = document.getElementById('heart-target');
        function startGame() {
            score = 0;
            document.getElementById('score').innerText = "Skor: 0";
            document.getElementById('start-game').style.display = "none";
            document.getElementById('game-area').style.display = "block";
            moveHeart();
            setTimeout(() => {
                document.getElementById('game-area').style.display = "none";
                document.getElementById('start-game').style.display = "inline-block";
                document.getElementById('start-game').innerText = "Main Lagi";
                alert("Waktu Habis! Kamu menangkap " + score + " cintaku! ‚ù§Ô∏è");
            }, 15000);
        }
        function moveHeart() {
            const area = document.getElementById('game-area');
            heart.style.left = Math.random() * (area.clientWidth - 50) + 'px';
            heart.style.top = Math.random() * (area.clientHeight - 50) + 'px';
        }
        heart.onclick = () => { score++; document.getElementById('score').innerText = "Skor: " + score; moveHeart(); };

        /* LETTER LOGIC */
        const messages = [
            "Senyummu adalah sinar matahariku di hari mendung. ‚ù§Ô∏è",
            "Terima kasih sudah selalu ada untukku, Sayang. üíñ",
            "Kamu adalah bagian terbaik dari setiap hariku. ‚ú®",
            "Aku selalu kagum dengan ketulusan hatimu. üå∏",
            "Hatiku memilihmu, hari ini dan selamanya. üíç"
        ];
        let msgIdx = 0;
        function openLetter() {
            const env = document.getElementById('envelope');
            env.classList.add('open');
            document.getElementById('love-text').innerText = messages[msgIdx];
            document.getElementById('next-letter-btn').style.display = "block";
        }
        function nextMessage() {
            const env = document.getElementById('envelope');
            env.classList.remove('open');
            setTimeout(() => {
                msgIdx = (msgIdx + 1) % messages.length;
                openLetter();
            }, 600);
        }

        /* INITIALIZE SWIPER */
        new Swiper(".mySwiper", {
            effect: "coverflow",
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: "auto",
            loop: true,
            coverflowEffect: { rotate: 20, stretch: 0, depth: 100, modifier: 1, slideShadows: false }
        });

        /* ANIMASI SCROLL (INTERSECTION OBSERVER) */
const observerOptions = {
    threshold: 0.1 // Muncul saat 10% elemen terlihat
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { 
        if (entry.isIntersecting) {
            // Saat elemen masuk ke layar
            entry.target.classList.add('show');
        } else {
            // Saat elemen keluar dari layar (membuat animasi bisa muncul berkali-kali)
            entry.target.classList.remove('show');
        }
    });
}, observerOptions);

// Menjalankan observer untuk semua elemen dengan class .topic
document.querySelectorAll('.topic').forEach(topic => {
    observer.observe(topic);
});
        
        function openJagat(){ window.location.href="jagat://map"; setTimeout(()=>window.location.href="https://play.google.com/store/apps/details?id=com.jagat.social",1200); }
    </script>
</body>
</html>







